C51 COMPILER V9.59.0.0   MAIN                                                              11/04/2018 19:55:46 PAGE 1   


C51 COMPILER V9.59.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\main.ls
                    -t) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          #include <at892051.h>
   2          
   3          sbit signal = P3^4;
   4          sbit type = P3^5;
   5          
   6          void delay(int delay_time);
   7          void begin();
   8          void start(int );
   9          void send_signal();
  10          void finish(int delay_time);
  11          void allOn();
  12          void allOff();
  13          void blink(int delay_time, int repeat);
  14          void run(int delay_time, int repeat);
  15          void hitAndTurn(int delay_time, int repeat);
  16          void runAndBack(int delay_time, int repeat);
  17          void wait(int delay_time);
  18          void set(float value, int delay_time);
  19          
  20          
  21          int main( ) {
  22   1        begin();
  23   1        while(1) {
  24   2          run(10, 6);
  25   2          hitAndTurn(10, 3);
  26   2          runAndBack(10, 2);
  27   2        }
  28   1      }
  29          
  30          void wait(int delay_time) {
  31   1        allOff();
  32   1        delay(delay_time);
  33   1      }
  34          
  35          void blink(int delay_time, int repeat) {
  36   1        int i;
  37   1        start(0);
  38   1        for(i=0 ; i<repeat ; i++) {
  39   2          allOn();
  40   2          delay(delay_time);
  41   2          allOff();
  42   2          delay(delay_time);
  43   2        }
  44   1        finish(0);
  45   1      }
  46          
  47          void hitAndTurn(int delay_time, int repeat) {
  48   1        int i;
  49   1        start(0);
  50   1        if (type==0) {
  51   2          for(i=0 ; i<repeat ; i++) {
  52   3            P1 = 0xF3; // 11110011
  53   3            delay(delay_time);
  54   3            P1 = 0xF9; // 11111001
C51 COMPILER V9.59.0.0   MAIN                                                              11/04/2018 19:55:46 PAGE 2   

  55   3            delay(delay_time);
  56   3            P1 = 0xFC; // 11111100
  57   3            delay(delay_time);
  58   3            P1 = 0x7E; // 01111110
  59   3            delay(delay_time);
  60   3            P1 = 0x3F; // 00111111
  61   3            delay(delay_time);
  62   3            P1 = 0x9F; // 10011111
  63   3            delay(delay_time);
  64   3            P1 = 0xCF; // 11001111
  65   3            delay(delay_time);
  66   3            P1 = 0x9F; // 10011111
  67   3            delay(delay_time);
  68   3            P1 = 0x3F; // 00111111
  69   3            delay(delay_time);
  70   3            P1 = 0x7E; // 01111110
  71   3            delay(delay_time);
  72   3            P1 = 0xFC; // 11111100
  73   3            delay(delay_time);
  74   3            P1 = 0xF9; // 11111001
  75   3            delay(delay_time);
  76   3          }
  77   2        }
  78   1        else if(type==1) {
  79   2          for(i=0 ; i<repeat ; i++) {
  80   3            P1 = 0xCF; // 11001111
  81   3            delay(delay_time);
  82   3            P1 = 0x9F; // 10011111
  83   3            delay(delay_time);
  84   3            P1 = 0x3F; // 00111111
  85   3            delay(delay_time);
  86   3            P1 = 0x7E; // 01111110
  87   3            delay(delay_time);
  88   3            P1 = 0xFC; // 11111100
  89   3            delay(delay_time);
  90   3            P1 = 0xF9; // 11111001
  91   3            delay(delay_time);
  92   3            P1 = 0xF3; // 11110011
  93   3            delay(delay_time);
  94   3            P1 = 0xF9; // 11111001
  95   3            delay(delay_time);
  96   3            P1 = 0xFC; // 11111100
  97   3            delay(delay_time);
  98   3            P1 = 0x7E; // 01111110
  99   3            delay(delay_time);
 100   3            P1 = 0x3F; // 00111111
 101   3            delay(delay_time);
 102   3            P1 = 0x9F; // 10011111
 103   3            delay(delay_time);
 104   3          }
 105   2        }
 106   1        finish(0);
 107   1      }
 108          
 109          void run(int delay_time, int repeat) {
 110   1        int i;
 111   1        start(0);
 112   1        for (i=0 ; i<repeat ; i++) {
 113   2          set(0xF3, delay_time);
 114   2          set(0xF9, delay_time);
 115   2          set(0xFC, delay_time);
 116   2          set(0x7E, delay_time);
C51 COMPILER V9.59.0.0   MAIN                                                              11/04/2018 19:55:46 PAGE 3   

 117   2          set(0x3F, delay_time);
 118   2          set(0x9F, delay_time);
 119   2          set(0xCF, delay_time);
 120   2          set(0xE7, delay_time);
 121   2          /*
 122   2          P1 = 0xF3; // 11110011
 123   2          delay(delay_time);
 124   2          P1 = 0xF9; // 11111001
 125   2          delay(delay_time);
 126   2          P1 = 0xFC; // 11111100
 127   2          delay(delay_time);
 128   2          P1 = 0x7E; // 01111110
 129   2          delay(delay_time);
 130   2          P1 = 0x3F; // 00111111
 131   2          delay(delay_time);
 132   2          P1 = 0x9F; // 10011111
 133   2          delay(delay_time);
 134   2          P1 = 0xCF; // 11001111
 135   2          delay(delay_time);
 136   2          P1 = 0xE7; // 11100111
 137   2          delay(delay_time);
 138   2          */
 139   2        }
 140   1        finish(0);
 141   1      }
 142          
 143          void set(float value, int delay_time) {
 144   1        P1 = value;
 145   1        delay(delay_time);
 146   1      }
 147          
 148          void runAndBack(int delay_time, int repeat) {
 149   1        int i;
 150   1        start(0);
 151   1        for (i=0 ; i<repeat ; i++) {
 152   2          P1 = 0xF3; // 11110011
 153   2          delay(delay_time);
 154   2          P1 = 0xF9; // 11111001
 155   2          delay(delay_time);
 156   2          P1 = 0xF3; // 11110011
 157   2          delay(delay_time);
 158   2          P1 = 0xF9; // 11111001
 159   2          delay(delay_time);
 160   2          P1 = 0xFC; // 11111100
 161   2          delay(delay_time);
 162   2          P1 = 0xF9; // 11111001
 163   2          delay(delay_time);
 164   2          P1 = 0xFC; // 11111100
 165   2          delay(delay_time);
 166   2          P1 = 0x7E; // 01111110
 167   2          delay(delay_time);
 168   2          P1 = 0xFC; // 11111100
 169   2          delay(delay_time);
 170   2          P1 = 0x7E; // 01111110
 171   2          delay(delay_time);
 172   2          P1 = 0x3F; // 00111111
 173   2          delay(delay_time);
 174   2          P1 = 0x7E; // 01111110
 175   2          delay(delay_time);
 176   2          P1 = 0x3F; // 00111111
 177   2          delay(delay_time);
 178   2          P1 = 0x9F; // 10011111
C51 COMPILER V9.59.0.0   MAIN                                                              11/04/2018 19:55:46 PAGE 4   

 179   2          delay(delay_time);
 180   2          P1 = 0x3F; // 00111111
 181   2          delay(delay_time);
 182   2          P1 = 0x9F; // 10011111
 183   2          delay(delay_time);
 184   2          P1 = 0xCF; // 11001111
 185   2          delay(delay_time);
 186   2          P1 = 0x9F; // 10011111
 187   2          delay(delay_time);
 188   2          P1 = 0xCF; // 11001111
 189   2          delay(delay_time);
 190   2          P1 = 0xE7; // 11100111
 191   2          delay(delay_time);
 192   2          P1 = 0xCF; // 11001111
 193   2          delay(delay_time);
 194   2          P1 = 0xE7; // 11100111
 195   2          delay(delay_time);
 196   2          P1 = 0xF3; // 11110011
 197   2          delay(delay_time);
 198   2          P1 = 0xE7; // 11100111
 199   2          delay(delay_time);
 200   2        }
 201   1        finish(0);
 202   1      }
 203          
 204          void load(int delay_time, int repeat) {
 205   1        P1 = 0xF7; // 11110111
 206   1        P1 = 0xF3; // 11110011
 207   1        P1 = 0xF1; // 11110001
 208   1        P1 = 0xF0; // 11110000
 209   1        P1 = 0x70; // 01110000
 210   1        P1 = 0x30; // 00110000
 211   1        P1 = 0x10; // 00010000
 212   1        P1 = 0x00; // 00000000
 213   1      }
*** WARNING C280 IN LINE 204 OF main.c: 'delay_time': unreferenced local variable
*** WARNING C280 IN LINE 204 OF main.c: 'repeat': unreferenced local variable
 214          
 215          void unload(int delay_time, int repeat) {
 216   1        P1 = 0x10; // 00010000
 217   1        P1 = 0x30; // 00110000
 218   1        P1 = 0x70; // 01110000
 219   1        P1 = 0xF0; // 11110000
 220   1        P1 = 0xF1; // 11110001
 221   1        P1 = 0xF3; // 11110011
 222   1        P1 = 0xF7; // 11110111
 223   1        P1 = 0xFF; // 11111111
 224   1      }
*** WARNING C280 IN LINE 215 OF main.c: 'delay_time': unreferenced local variable
*** WARNING C280 IN LINE 215 OF main.c: 'repeat': unreferenced local variable
 225          
 226          void reverseLoad(int delay_time, int repeat) {
 227   1        P1 = 0x08; // 00001000
 228   1        P1 = 0x0C; // 00001100
 229   1        P1 = 0x0E; // 00001110
 230   1        P1 = 0x0F; // 00001111
 231   1      }
*** WARNING C280 IN LINE 226 OF main.c: 'delay_time': unreferenced local variable
*** WARNING C280 IN LINE 226 OF main.c: 'repeat': unreferenced local variable
 232            
 233          void delay(int value) { 
 234   1        int i,j;
C51 COMPILER V9.59.0.0   MAIN                                                              11/04/2018 19:55:46 PAGE 5   

 235   1        for( i=0 ; i<1000 ; i++)
 236   1          for( j=0 ; j<value ; j++ );
 237   1        return;
 238   1      }
 239          
 240          void allOn() {
 241   1        P1 = 0x00;
 242   1        
 243   1      }
 244          
 245          void allOff() {
 246   1        P1 = 0xFF; 
 247   1      }
 248          
 249          void send_signal() {
 250   1        signal=1;
 251   1        delay(1);
 252   1        signal=0;
 253   1        return;
 254   1      }
 255          
 256          void begin() {
 257   1        if (type == 1) {
 258   2          signal=0;
 259   2        }
 260   1        return;
 261   1      }
 262          
 263          void start(int delay_time) {
 264   1        if(type == 0){
 265   2          while(signal==0);
 266   2        } 
 267   1        else if(type == 1) {
 268   2          send_signal();
 269   2          delay(delay_time);
 270   2        }
 271   1        return;
 272   1      }
 273          
 274          void finish(int delay_time){
 275   1        if (type == 0) 
 276   1          delay(delay_time);
 277   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   1039    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----      44
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  6 WARNING(S),  0 ERROR(S)
